# 预处理器

## 一、背景

编译一个C程序涉及多个步骤，第一个步骤被称为**预处理（preprocessing）**。C语言**预处理器（preprocessor）**在源代码进入编译前对其进行一些文本性质的操作。这些操作主要包括：

* 插入被***#include***指令包含的文件的内容
* 定义和替换***#define***指令定义的符号
* 确定代码的部分内容是否需要根据***条件编译***指令进行编译
* 删除注释



## 二、预定义符号

C语言预定义符号是由C预处理器定义的**宏定义**符号，共五个。它们的值为字符串常量或者十进制数字常量。

| 符号         | 含义                                  | 样例值        |
| ------------ | ------------------------------------- | ------------- |
| **`_FILE_`** | 进行编译的源文件                      | "name.c"      |
| **`_LINE_`** | 文件当前行号                          | 25            |
| **`_DTAE_`** | 文件被编译的日期                      | "Jul 10 2022" |
| **`_TIME_`** | 文件被编译的时间                      | "14:22:30"    |
| **`_STDC_`** | 若编译器遵循ANSI C，值为1，否则未定义 | 1             |



## 三、#define

***#define***指令最简单的用法就是为数值命名一个符号。用法描述是：

`#define name stuff`

这条指令的效果是：预处理器会把文件中的name替换成stuff。替换文本stuff不仅限于数值字面值常量，它可以是任何文本。例如：

* `#define  reg          register `
* `#define  do_forever   for(;;)`
* `#define  CASE         breake;case`





